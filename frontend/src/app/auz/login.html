<div class="login">
  <div class="login-wrapper">
    <div class="login-title">
      {{"login.title" | translate}}
    </div>
    <form nz-form [formGroup]="validateForm" class="login-form" (submit)="login()">
      <div nz-row>
        <div nz-col [nzSpan]="24">
          <div nz-form-item>
            <div nz-form-control [nzValidateStatus]="validateForm.controls.username">
              <div class="ant-input-affix-wrapper">
                <span class="ant-input-prefix">
                  <i class="anticon anticon-user"></i>
                </span>
                <input nz-input formControlName="username" [(ngModel)]="token.username" nzSize="large"
                       maxlength="24" placeholder="{{'login.placeholder.username' | translate}}"/>
              </div>
              <div nz-form-explain
                   *ngIf="validateForm.controls.username.dirty&&validateForm.controls.username.hasError('required')">
                {{'login.error.username.empty' | translate}}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div nz-row>
        <div nz-col [nzSpan]="24">
          <div nz-form-item>
            <div nz-form-control [nzValidateStatus]="validateForm.controls.password">
              <div class="ant-input-affix-wrapper">
                <span class="ant-input-prefix">
                  <i class="anticon anticon-lock"></i>
                </span>
                <input nz-input type="password" formControlName="password" [(ngModel)]="token.password" nzSize="large"
                       maxlength="16" placeholder="{{'login.placeholder.password' | translate}}"/>
              </div>
              <div nz-form-explain
                   *ngIf="validateForm.controls.password.dirty&&validateForm.controls.password.hasError('required')">
                {{'login.error.password.empty' | translate}}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div nz-row *ngIf="failedCount >= 3">
        <div nz-col [nzSpan]="16">
          <div nz-form-item>
            <div nz-form-control [nzValidateStatus]="validateForm.controls.captcha">
              <div class="ant-input-affix-wrapper">
                <span class="ant-input-prefix">
                  <i class="anticon anticon-picture"></i>
                </span>
                <input nz-input type="captcha" formControlName="captcha" [(ngModel)]="token.captcha" nzSize="large"
                       maxlength="6" placeholder="{{'login.placeholder.captcha' | translate}}"/>
              </div>
              <div nz-form-explain
                   *ngIf="validateForm.controls.captcha.dirty&&validateForm.controls.captcha.hasError('required')">
                {{'login.error.captcha.empty' | translate}}
              </div>
            </div>
          </div>
        </div>
        <div nz-col [nzSpan]="8">
          <img src="{{captchaImagePath}}" (click)="getCaptcha()" class="img-captcha"/>
        </div>
      </div>
      <div nz-row>
        <div nz-col [nzSpan]="24">
          <button type="submit" nz-button nzType="primary" nzSize="large" class="btn-login">
            {{"login.btn.text" | translate}}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
